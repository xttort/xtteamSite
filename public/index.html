<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./style.css">
    <title>Games - xtteam</title>
    <link rel="icon" href="./images/icons/icon.svg">
</head>
<body>
    <header class="header">
        <a class = "logo" href="./index.html"><img class = "logo" src="./images/icons/icon.svg" alt="logo"> <h1  href="#!">xtteam</h1></a>
        <ul class="header_list">
            <li><a class="header_purple" href="./index.html">!Latest news!</a></li>
            <li><a class = "dot">‚Ä¢</a></li>
            <li><a class="header_purple" href="./games/games.html">Games</a></li>
            <li><a class = "dot">‚Ä¢</a></li>
            <li><a class="header_purple" href="./aboutUs/aboutUs.html">About us</a></li>
        </ul>
        <div class="auth-container">
            <div id="authButton" class="auth-button">
                <a class="btn"  onclick="window.authModal.show(); return false;">Sign in</a>
            </div>
            
            <div id="profileButton" class="profile-info" style="display: none;">
                <a href="/profile" class="profile-link">
                    <div class="profile-avatar" id="profileAvatar"></div>
                    <span class="profile-name" id="profileName"></span>
                </a>
            </div>
        </div>
    </header>
    <div class ="rectbg">
        <div>
            <p class="slogan">Games Are Fun!</p>
        </div>
        <div class="container">
            
            <div class="image-grid">
                <!-- –ü–ª–∏—Ç–∫–∞ 1: —Å—Ä–µ–¥–Ω–∏–π –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ —Å –¥–ª–∏–Ω–Ω–æ–π –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–æ–π -->
                <div class="tile tile-1">
                    <div class="tile-overlay">
                        <div class="tile-content">
                            <h2 class="tile-title">Strange games?</h2>
                            <p class="tile-description">Maybe WDK </p>   
                            <p class="tile-description">Try by yourself</p>
                        </div>
                        <a class="btn btn-small" href="./games/games.html">Learn more</a>
                    </div>
                </div>
                
                <!-- –ü–ª–∏—Ç–∫–∞ 2: –≤–µ—Ä—Ö–Ω—è—è –±–æ–ª—å—à–∞—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è (—á–∞—Å—Ç—å –±—É–∫–≤—ã –ì) -->
                <div class="tile tile-2">
                    <div class="tile-overlay">
                        <div class="tile-content">
                            <h2 class="tile-title">Our goal is your entertainment</h2>
                            <p class="tile-description">Every second person is happy</p>
                            <p class="tile-description"> (I'm sad, but what about you?)</p>
                             
                        </div>
                        <!-- <a href="#" class="btn">Learn more</a> -->
                    </div>
                </div>
                
                <!-- –ü–ª–∏—Ç–∫–∞ 3: –Ω–∏–∂–Ω—è—è –∫–≤–∞–¥—Ä–∞—Ç–Ω–∞—è (—á–∞—Å—Ç—å –±—É–∫–≤—ã –ì) -->
                <div class="tile tile-3">
                    <div class="tile-overlay">
                        <div class="tile-content">
                            <h2 class="tile-title">This is our site</h2>
                            <p class="tile-description">And we can do anything we want!!!</p>
                        </div>
                    </div>
                </div>
                
                <!-- –ü–ª–∏—Ç–∫–∞ 4: –∫–≤–∞–¥—Ä–∞—Ç–Ω–∞—è –∫—Ä—É–ø–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ -->
                <div class="tile tile-4">
                    <div class="tile-overlay">
                        <div class="tile-content">
                            <h2 class="tile-title">Think about it 0_0</h2>
                            <!-- <a href="#" class="btn">Learn more</a> -->
                        </div>
                    </div>
                </div>
                
                
                <!-- –ü–ª–∏—Ç–∫–∏ 5, 6, 7: —Ç—Ä–∏ –º–∞–ª–µ–Ω—å–∫–∏–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ –ø–ª–∏—Ç–∫–∏ -->
                <div class="tile tile-5">
                    <!-- –ë–µ–∑ —Ç–µ–∫—Å—Ç–∞, —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                </div>
                
                <div class="tile tile-6">
                    <!-- –ë–µ–∑ —Ç–µ–∫—Å—Ç–∞, —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                </div>
                
                <div class="tile tile-7">
                    <!-- –ë–µ–∑ —Ç–µ–∫—Å—Ç–∞, —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
                </div>
            </div>
            
        </div>
        
        <script>
            
            
            // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –ø–ª–∏—Ç–∫–∏
            document.querySelectorAll('.tile').forEach(tile => {
                tile.addEventListener('mouseenter', function() {
                    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–π —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∏—Ç–∫–∏
                    const title = this.querySelector('.tile-title');
                    if (title) {
                        title.style.transform = 'translateY(-5px)';
                        title.style.transition = 'transform 0.3s ease';
                    }
                });
                
                tile.addEventListener('mouseleave', function() {
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –º–µ—Å—Ç–æ
                    const title = this.querySelector('.tile-title');
                    if (title) {
                        title.style.transform = 'translateY(0)';
                    }
                });
            });
        </script>

    <div>
        <p class="slogan">Latest news</p>
    </div>
    <!-- NEWS -->
    <div class="container">
        <section class="news-section">
            <!-- –ù–æ–≤–æ—Å—Ç—å 1 -->
            <article class="news-card">
                <div class="news-image">
                    <img src="./images/news/Iron Man Smirk GIF.gif" alt="New Game Announcement">
                    <div class="news-date">
                        <span class="news-day">26</span>
                        <span class="news-month">DEC</span>
                        <span class="news-year">2025</span>
                    </div>
                </div>
                <div class="news-content">
                    <h3 class="news-title">Jarvis start xtteam's site</h3>
                    <p class="news-excerpt">WDK just look at the gif above</p>
                    <div class="news-meta">
                        <span class="news-author">By xttort</span>
                        <div class="news-category">ANNOUNCEMENT</div>
                    </div>
                </div>
            </article>


        </section>
    </div>
    <div>
        <section class="features">
            <!-- Support Card -->
            <article class="feature-card">
                <img class="card-icon" src="./images/icons/icon-mail.svg" alt="logo">
                <h3 class="left-feature-card-text">xttort's mail</h3>
                <p class="left-feature-card-text">Send letters to xttort with your ideas! Ask him questions and many other things!</p>
                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=mrcet040@gmail.com&su=Your ideas&body=Write something!">
                    <button class="btnSmall">Write letter</button>
                </a>
            </article>

            <!-- Sales Growth Card -->
            <article class="feature-card">
                <img class="card-icon" src="./images/icons/icon-youtube.svg" alt="logo">
                <h3 class="left-feature-card-text">xttort's youtube channel</h3>
                <p class="left-feature-card-text">Dive into developer's and game designer's past and find out something</p>
                <a href="https://www.youtube.com/@xttort">
                    <button class="btnSmall">Show channel</button>
                </a>
            </article>

            <!-- Components-driven Card -->
            <article class="feature-card">
                <img class="card-icon" src="./images/icons/icon-mail.svg" alt="logo">
                <h3 class="left-feature-card-text">JustNikitaDis's mail</h3>
                <p class="left-feature-card-text">Send letters to JustNikitaDis with your ideas! Ask him questions and many other things!</p>
                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=nikita1911200418@gmail.com&su=Your ideas&body=Write something!">
                    <button class="btnSmall">Write letter</button>
                </a>
            </article>

            <!-- Swap the Icon Card -->
            <article class="feature-card">
                <img class="card-icon" src="./images/icons/icon-youtube.svg" alt="logo">
                <h3 class="left-feature-card-text">JustNikitaDis's youtube channel</h3>
                <p class="left-feature-card-text">Dive into developer's and game designer's past and find out something</p>
                <a href="https://www.youtube.com/@justnikitaplays1472">
                    <button class="btnSmall">Show channel</button>
                </a>
            </article>
        </section>
    </div>

    </div>
    
    <footer >
        <h1 class="footerWave">¬© 2025 xtteam. All rights reserved.</h1>
    </footer>

    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        async function checkAuth() {
            try {
                const response = await fetch('/api/achievements');
                const data = await response.json();
                
                if (data.user) {
                    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                    document.getElementById('authButton').style.display = 'none';
                    document.getElementById('profileButton').style.display = 'flex';
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤–∞—Ç–∞—Ä –∏ –∏–º—è
                    const avatar = document.getElementById('profileAvatar');
                    const name = document.getElementById('profileName');
                    
                    const firstLetter = data.user.username.charAt(0).toUpperCase();
                    avatar.textContent = firstLetter;
                    name.textContent = data.user.username;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
            }
        }
    
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        async function unlockAchievement(achievementName) {
            try {
                const response = await fetch('/api/unlock-achievement', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ achievementName })
                });
                
                const data = await response.json();
                if (data.success) {
                    console.log(`üèÜ ${data.message}`);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:', error);
            }
        }
    
        // –¢—Ä–µ–∫–µ—Ä—ã –¥–ª—è –Ω–æ–≤—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        let hoveredTiles = new Set();
        let openedGameModals = new Set();
        let downloadedGames = new Set();
    
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        document.addEventListener('DOMContentLoaded', () => {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            checkAuth();
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "With Registration!" - —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            // (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ server.js –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏)
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "First News" - –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –∫ –ø–µ—Ä–≤–æ–π –Ω–æ–≤–æ—Å—Ç–∏
            const newsSection = document.querySelector('.news-section');
            if (newsSection) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            unlockAchievement('First News');
                            observer.disconnect();
                        }
                    });
                }, { threshold: 0.5 });
                
                observer.observe(newsSection);
            }
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Curious" - –Ω–∞–≤–µ–¥–µ–Ω–∏–µ –º—ã—à–∏ –Ω–∞ –≤—Å–µ –ø–ª–∏—Ç–∫–∏
            document.querySelectorAll('.tile').forEach((tile, index) => {
                tile.addEventListener('mouseenter', function() {
                    hoveredTiles.add(index);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ –ø–ª–∏—Ç–∫–∏ –±—ã–ª–∏ –Ω–∞–≤–µ–¥–µ–Ω—ã
                    if (hoveredTiles.size === document.querySelectorAll('.tile').length) {
                        unlockAchievement('Curious');
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–±–æ–ª—å—à–æ–π —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∏—Ç–∫–∏
                    const title = this.querySelector('.tile-title');
                    if (title) {
                        title.style.transform = 'translateY(-5px)';
                        title.style.transition = 'transform 0.3s ease';
                    }
                });
                
                tile.addEventListener('mouseleave', function() {
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –º–µ—Å—Ç–æ
                    const title = this.querySelector('.tile-title');
                    if (title) {
                        title.style.transform = 'translateY(0)';
                    }
                });
            });
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Team Introduction" - –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É "About Us"
            document.querySelectorAll('a[href*="aboutUs.html"]').forEach(link => {
                link.addEventListener('click', () => {
                    setTimeout(() => {
                        unlockAchievement('Team Introduction');
                    }, 100);
                });
            });
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Letter to Developer" - –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–∏—Å—å–º–∞
            document.querySelectorAll('a[href*="mail.google.com"]').forEach(link => {
                link.addEventListener('click', () => {
                    unlockAchievement('Letter to Developer');
                });
            });
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "YouTube Subscriber" - –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É YouTube
            document.querySelectorAll('a[href*="youtube.com"]').forEach(link => {
                link.addEventListener('click', () => {
                    unlockAchievement('YouTube Subscriber');
                });
            });
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Game Observer" –∏ "GamEr" –±—É–¥—É—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ games.html
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            window.authModal = new AuthModal();
        });
    </script>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
<div id="authModal" class="auth-modal">
    <div class="modal-content">
        <button class="close-modal" id="closeAuthModal">&times;</button>
        
        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="login">Login</button>
            <button class="auth-tab" data-tab="register">Register</button>
        </div>

        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
        <div id="loginForm" class="auth-form active">
            <h2 class="form-title">Login</h2>
            
            <div class="auth-message" id="loginMessage"></div>
            
            <div class="form-group">
                <label class="form-label">user name</label>
                <input type="text" class="form-input" id="loginUsername" placeholder="Write your login">
                <div class="form-error" id="loginUsernameError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" id="loginPassword" placeholder="Write your password">
                <div class="form-error" id="loginPasswordError"></div>
            </div>
            
            <button class="auth-btn" id="loginBtn">Login</button>
            
            <div class="form-switch">
                Don't have an account?
                <a class="switch-link" data-switch="register">Register</a>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div id="registerForm" class="auth-form">
            <h2 class="form-title">Create account</h2>
            
            <div class="auth-message" id="registerMessage"></div>
            
            <div class="form-group">
                <label class="form-label">User name</label>
                <input type="text" class="form-input" id="registerUsername" placeholder="Create a password">
                <div class="form-error" id="registerUsernameError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Email (optional)</label>
                <input type="email" class="form-input" id="registerEmail" placeholder="example@email.com">
                <div class="form-error" id="registerEmailError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" id="registerPassword" placeholder="Create a password">
                <div class="form-error" id="registerPasswordError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password confirmation</label>
                <input type="password" class="form-input" id="registerConfirmPassword" placeholder="Repeat a password">
                <div class="form-error" id="registerConfirmPasswordError"></div>
            </div>
            
            <button class="auth-btn" id="registerBtn">Create account</button>
            
            <div class="form-switch">
                Already have an account?
                <a class="switch-link" data-switch="login">Login</a>
            </div>
        </div>
    </div>
</div>

<script>
    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    async function checkAuth() {
        console.log('üîç Checking authentication status...');
        
        try {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ /api/me
            const response = await fetch('/api/me', {
                method: 'GET',
                credentials: 'include',
                headers: {
                    'Accept': 'application/json'
                }
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            
            const data = await response.json();
            console.log('Auth check response:', data);
            
            const authButton = document.getElementById('authButton');
            const profileButton = document.getElementById('profileButton');
            const profileAvatar = document.getElementById('profileAvatar');
            const profileName = document.getElementById('profileName');
            
            if (data.authenticated && data.user) {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                if (authButton) authButton.style.display = 'none';
                if (profileButton) {
                    profileButton.style.display = 'flex';
                    profileButton.style.alignItems = 'center';
                }
                
                if (profileAvatar) {
                    const firstLetter = data.user.username.charAt(0).toUpperCase();
                    profileAvatar.textContent = firstLetter;
                    profileAvatar.style.display = 'flex';
                    profileAvatar.style.alignItems = 'center';
                    profileAvatar.style.justifyContent = 'center';
                }
                
                if (profileName) {
                    profileName.textContent = data.user.username;
                }
                
                console.log('‚úÖ Authenticated as:', data.user.username);
                return true;
            } else {
                // –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                if (authButton) {
                    authButton.style.display = 'block';
                    authButton.style.opacity = '1';
                }
                if (profileButton) profileButton.style.display = 'none';
                
                console.log('‚ùå Not authenticated');
                return false;
            }
        } catch (error) {
            console.error('‚ùå Auth check failed:', error);
            
            // Fallback
            const authButton = document.getElementById('authButton');
            const profileButton = document.getElementById('profileButton');
            
            if (authButton) authButton.style.display = 'block';
            if (profileButton) profileButton.style.display = 'none';
            
            return false;
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    async function unlockAchievement(achievementName) {
        try {
            const response = await fetch('/api/unlock-achievement', {
                method: 'POST',
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({ achievementName })
            });
            
            const data = await response.json();
            if (data.success) {
                console.log(`üèÜ Achievement unlocked: ${achievementName}`);
            }
            return data;
        } catch (error) {
            console.error('Achievement unlock error:', error);
            return { success: false, error: error.message };
        }
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π AuthModal —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π
    class AuthModal {
        constructor() {
            this.modal = document.getElementById('authModal');
            this.tabs = document.querySelectorAll('.auth-tab');
            this.forms = document.querySelectorAll('.auth-form');
            this.closeBtn = document.getElementById('closeAuthModal');
            this.switchLinks = document.querySelectorAll('.switch-link');
            
            this.init();
        }
    
        init() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
            this.tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    this.switchTab(tabName);
                });
            });
    
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ñ–æ—Ä–º
            this.switchLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const formName = link.dataset.switch;
                    this.switchTab(formName);
                });
            });
    
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            this.closeBtn.addEventListener('click', () => {
                this.hide();
            });
    
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
            this.modal.addEventListener('click', (e) => {
                if (e.target === this.modal) {
                    this.hide();
                }
            });
    
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º
            this.initForms();
        }
    
        switchTab(tabName) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            this.tabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.tab === tabName);
            });
    
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Ñ–æ—Ä–º—É
            this.forms.forEach(form => {
                form.classList.toggle('active', form.id === `${tabName}Form`);
            });
    
            // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            this.clearMessages();
            this.clearErrors();
        }
    
        initForms() {
            // –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.addEventListener('click', () => this.handleLogin());
            }
    
            // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è
            const registerBtn = document.getElementById('registerBtn');
            if (registerBtn) {
                registerBtn.addEventListener('click', () => this.handleRegister());
            }
    
            // Enter key submission
            ['loginUsername', 'loginPassword', 'registerUsername', 'registerPassword', 'registerConfirmPassword'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            if (id.startsWith('login')) {
                                this.handleLogin();
                            } else if (id.startsWith('register')) {
                                this.handleRegister();
                            }
                        }
                    });
                }
            });
        }
    
        async handleLogin() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
            this.clearErrors();
            this.clearMessages();
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            let isValid = true;
            
            if (!username) {
                this.showError('loginUsernameError', 'Username is required');
                isValid = false;
            }
            
            if (!password) {
                this.showError('loginPasswordError', 'Password is required');
                isValid = false;
            }
            
            if (!isValid) return;
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏
            const loginBtn = document.getElementById('loginBtn');
            const originalText = loginBtn.textContent;
            loginBtn.disabled = true;
            loginBtn.textContent = 'Logging in...';
            
            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    credentials: 'include',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    this.showMessage('loginMessage', 'Login successful!', 'success');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º UI –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞
                    setTimeout(async () => {
                        this.hide();
                        await checkAuth();
                        
                        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
                        setTimeout(() => {
                            window.location.reload();
                        }, 500);
                        
                    }, 1000);
                } else {
                    this.showMessage('loginMessage', data.error || 'Login failed', 'error');
                }
            } catch (error) {
                console.error('Network error:', error);
                this.showMessage('loginMessage', 'Network error. Please try again.', 'error');
            } finally {
                loginBtn.disabled = false;
                loginBtn.textContent = originalText;
            }
        }
    
        async handleRegister() {
            const username = document.getElementById('registerUsername').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value.trim();
            const confirmPassword = document.getElementById('registerConfirmPassword').value.trim();
            
            // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
            this.clearErrors();
            this.clearMessages();
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            let isValid = true;
            
            if (!username) {
                this.showError('registerUsernameError', 'Username is required');
                isValid = false;
            } else if (username.length < 3) {
                this.showError('registerUsernameError', 'Username must be at least 3 characters');
                isValid = false;
            }
            
            if (email && !this.validateEmail(email)) {
                this.showError('registerEmailError', 'Invalid email format');
                isValid = false;
            }
            
            if (!password) {
                this.showError('registerPasswordError', 'Password is required');
                isValid = false;
            } else if (password.length < 6) {
                this.showError('registerPasswordError', 'Password must be at least 6 characters');
                isValid = false;
            }
            
            if (!confirmPassword) {
                this.showError('registerConfirmPasswordError', 'Please confirm your password');
                isValid = false;
            } else if (password !== confirmPassword) {
                this.showError('registerConfirmPasswordError', 'Passwords do not match');
                isValid = false;
            }
            
            if (!isValid) return;
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏
            const registerBtn = document.getElementById('registerBtn');
            const originalText = registerBtn.textContent;
            registerBtn.disabled = true;
            registerBtn.textContent = 'Creating account...';
            
            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    credentials: 'include',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({ 
                        username, 
                        password, 
                        email: email || null 
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    this.showMessage('registerMessage', 'Account created successfully!', 'success');
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏–Ω–∏–º –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                    setTimeout(async () => {
                        await checkAuth();
                        this.hide();
                        
                        // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
                        setTimeout(() => {
                            window.location.reload();
                        }, 500);
                        
                    }, 1000);
                } else {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—à–∏–±–∫—É –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
                    this.showMessage('registerMessage', data.error || 'Registration failed', 'error');
                    
                    // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    if (data.error && data.error.toLowerCase().includes('username')) {
                        this.showError('registerUsernameError', data.error);
                    }
                    
                    // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–≤—è–∑–∞–Ω–∞ —Å email
                    if (data.error && data.error.toLowerCase().includes('email')) {
                        this.showError('registerEmailError', data.error);
                    }
                }
            } catch (error) {
                console.error('Registration error:', error);
                this.showMessage('registerMessage', 'Network error. Please try again.', 'error');
            } finally {
                registerBtn.disabled = false;
                registerBtn.textContent = originalText;
            }
        }
    
        validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
    
        showError(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.style.display = 'block';
                element.style.color = '#ff4757';
                
                // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –ø–æ–ª–µ –≤–≤–æ–¥–∞
                const inputId = elementId.replace('Error', '');
                const input = document.getElementById(inputId);
                if (input) {
                    input.style.borderColor = '#ff4757';
                    input.style.boxShadow = '0 0 0 1px #ff4757';
                }
            }
        }
    
        clearErrors() {
            const errors = document.querySelectorAll('.form-error');
            errors.forEach(error => {
                error.textContent = '';
                error.style.display = 'none';
                
                // –£–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É —É –ø–æ–ª–µ–π –≤–≤–æ–¥–∞
                const inputId = error.id.replace('Error', '');
                const input = document.getElementById(inputId);
                if (input) {
                    input.style.borderColor = '';
                    input.style.boxShadow = '';
                }
            });
        }
    
        showMessage(elementId, message, type) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.className = `auth-message ${type}`;
                element.style.display = 'block';
                element.style.opacity = '1';
            }
        }
    
        clearMessages() {
            const messages = document.querySelectorAll('.auth-message');
            messages.forEach(msg => {
                msg.className = 'auth-message';
                msg.textContent = '';
                msg.style.display = 'none';
            });
        }
    
        show() {
            this.modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
            this.clearErrors();
            this.clearMessages();
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω–ø—É—Ç—ã
            const inputs = [
                'loginUsername', 'loginPassword',
                'registerUsername', 'registerEmail', 'registerPassword', 'registerConfirmPassword'
            ];
            
            inputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) input.value = '';
            });
            
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
            this.switchTab('login');
            
            // –§–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ
            setTimeout(() => {
                const firstInput = document.getElementById('loginUsername');
                if (firstInput) firstInput.focus();
            }, 100);
        }
    
        hide() {
            this.modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', async () => {
        console.log('üìÑ Page loaded, initializing...');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        window.authModal = new AuthModal();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
        await checkAuth();
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        const newsSection = document.querySelector('.news-section');
        if (newsSection) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        unlockAchievement('First News');
                        observer.disconnect();
                    }
                });
            }, { threshold: 0.5 });
            
            observer.observe(newsSection);
        }
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Curious"
        let hoveredTiles = new Set();
        document.querySelectorAll('.tile').forEach((tile, index) => {
            tile.addEventListener('mouseenter', function() {
                hoveredTiles.add(index);
                
                if (hoveredTiles.size === document.querySelectorAll('.tile').length) {
                    unlockAchievement('Curious');
                }
            });
        });
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Team Introduction"
        document.querySelectorAll('a[href*="aboutUs.html"]').forEach(link => {
            link.addEventListener('click', () => {
                setTimeout(() => {
                    unlockAchievement('Team Introduction');
                }, 100);
            });
        });
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Letter to Developer"
        document.querySelectorAll('a[href*="mail.google.com"]').forEach(link => {
            link.addEventListener('click', () => {
                unlockAchievement('Letter to Developer');
            });
        });
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "YouTube Subscriber"
        document.querySelectorAll('a[href*="youtube.com"]').forEach(link => {
            link.addEventListener('click', () => {
                unlockAchievement('YouTube Subscriber');
            });
        });
    });
    
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ HTML
    window.showAuthModal = function() {
        if (window.authModal) {
            window.authModal.show();
        }
        return false;
    };
    
    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)
    setInterval(async () => {
        await checkAuth();
    }, 30000);
    </script>
</body>
</html>