<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <title>Games - xtteam</title>
    <link rel="icon" href="../images/icons/icon.svg">
</head>
<body>
    <header class="header">
        <a class = "logo" href="../index.html"><img class = "logo" src="../images/icons/icon.svg" alt="logo"> <h1  href="#!">xtteam</h1></a>
        <ul class="header_list">
            <li><a class="header_purple" href="../index.html">Latest news</a></li>
            <li><a class = "dot">‚Ä¢</a></li>
            <li><a class="header_purple" href="../games/games.html">Games</a></li>
            <li><a class = "dot">‚Ä¢</a></li>
            <li><a class="header_purple" href="#!">!About us!</a></li>
        </ul>
        <div class="auth-container">
            <div id="authButton" class="auth-button">
                <a class="btn" onclick="window.authModal.show(); return false;">Sign in</a>
            </div>
            
            <div id="profileButton" class="profile-info" style="display: none;">
                <a href="/profile" class="profile-link">
                    <div class="profile-avatar" id="profileAvatar"></div>
                    <span class="profile-name" id="profileName"></span>
                </a>
            </div>
        </div>
    </header>
    <div class ="rectbg">
        <div class="container">
            
            <!-- –ó–∞–º–µ–Ω—è–µ–º image-grid –Ω–∞ –±–ª–æ–∫–∏ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ -->
            <section class="developers-section">
                <h2 class="section-title">XTTTEAM</h2>
                <p class="section-subtitle">Strange guys wich love gamedev</p>
                
                <div class="developers-grid">
                    
                    <!-- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ 1: Ari Gibson -->
                    <div class="developer-card">
                        <div class="developer-avatar">
                            <img src="../images/developers/xttortAva.jpg" alt="Ari Gibson Avatar">
                        </div>
                        <div class="developer-info">
                            <h3 class="developer-name">Shadrin Stephan</h3>
                            <p class="developer-nickname">xttort</p>
                            <p class="developer-bio">
                                Inspired by fandoms and internet caulture started creating games in 2022. Learn C#, Unity, and Blender to bring ideas to life in a scetchs and then in a game. Also insired by Fnaf, Undertale, lowpoly models, bible and old game graphics. BRUH
                            </p>
                            <div class="developer-skills">
                                <span class="skill-tag">Animation</span>
                                <span class="skill-tag">Modeling</span>
                                <span class="skill-tag">Game Design</span>
                                <span class="skill-tag">Code</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ 2: William Pellen -->
                    <div class="developer-card">
                        <div class="developer-avatar">
                            <img src="../images/developers/JustNikitaDisAva.jpg" alt="William Pellen Avatar">
                        </div>
                        <div class="developer-info">
                            <h3 class="developer-name">Samokhvalov Nikita </h3>
                            <p class="developer-nickname">JustNikitaDis's</p>
                            <p class="developer-bio">
                                Learning OOP gradually evolved into an interest in game creation. He started with simple homemade mods, then moved on to exploring simple game engines, and finally ended up with Unity. He's currently actively exploring its capabilities and participating in various GameJams. His favorite pony is Twilight Sparkle.
                            </p>
                            <div class="developer-skills">
                                <span class="skill-tag">Code</span>
                                <span class="skill-tag">Game Design</span>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </section>
            
        </div>
        
        <section class="features">
            <!-- Support Card -->
            <article class="feature-card">
                <img class="card-icon" src="../images/icons/icon-mail.svg" alt="logo">
                <h3 class="left-feature-card-text">xttort's mail</h3>
                <p class="left-feature-card-text">Send letters to xttort with your ideas! Ask him questions and many other things!</p>
                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=mrcet040@gmail.com&su=Your ideas&body=Write something!">
                    <button class="btnSmall">Write letter</button>
                </a>
            </article>

            <!-- Sales Growth Card -->
            <article class="feature-card">
                <img class="card-icon" src="../images/icons/icon-youtube.svg" alt="logo">
                <h3 class="left-feature-card-text">xttort's youtube channel</h3>
                <p class="left-feature-card-text">Dive into developer's and game designer's past and find out something</p>
                <a href="https://www.youtube.com/@xttort">
                    <button class="btnSmall">Show channel</button>
                </a>
            </article>

            <!-- Components-driven Card -->
            <article class="feature-card">
                <img class="card-icon" src="../images/icons/icon-mail.svg" alt="logo">
                <h3 class="left-feature-card-text">JustNikitaDis's mail</h3>
                <p class="left-feature-card-text">Send letters to JustNikitaDis with your ideas! Ask him questions and many other things!</p>
                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=nikita1911200418@gmail.com&su=Your ideas&body=Write something!">
                    <button class="btnSmall">Write letter</button>
                </a>
            </article>

            <!-- Swap the Icon Card -->
            <article class="feature-card">
                <img class="card-icon" src="../images/icons/icon-youtube.svg" alt="logo">
                <h3 class="left-feature-card-text">JustNikitaDis's youtube channel</h3>
                <p class="left-feature-card-text">Dive into developer's and game designer's past and find out something</p>
                <a href="https://www.youtube.com/@justnikitaplays1472">
                    <button class="btnSmall">Show channel</button>
                </a>
            </article>
        </section>
    </div>
    
    <footer>
        <h1 class="footerWave">¬© 2025 xtteam. All rights reserved.</h1>
    </footer>
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        async function checkAuth() {
            try {
                const response = await fetch('/api/achievements');
                const data = await response.json();
                
                if (data.user) {
                    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                    document.getElementById('authButton').style.display = 'none';
                    document.getElementById('profileButton').style.display = 'flex';
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤–∞—Ç–∞—Ä –∏ –∏–º—è
                    const avatar = document.getElementById('profileAvatar');
                    const name = document.getElementById('profileName');
                    
                    const firstLetter = data.user.username.charAt(0).toUpperCase();
                    avatar.textContent = firstLetter;
                    name.textContent = data.user.username;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
            }
        }
    
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        async function unlockAchievement(achievementName) {
            try {
                const response = await fetch('/api/unlock-achievement', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ achievementName })
                });
                
                const data = await response.json();
                if (data.success) {
                    console.log(`üèÜ ${data.message}`);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:', error);
            }
        }
    
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        document.addEventListener('DOMContentLoaded', () => {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            checkAuth();
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Team Introduction" - –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–û –Ω–∞—Å"
            unlockAchievement('Team Introduction');
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Letter to Developer" - –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–∏—Å—å–º–∞
            document.querySelectorAll('a[href*="mail.google.com"]').forEach(link => {
                link.addEventListener('click', () => {
                    unlockAchievement('Letter to Developer');
                });
            });
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "YouTube Subscriber" - –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É YouTube
            document.querySelectorAll('a[href*="youtube.com"]').forEach(link => {
                link.addEventListener('click', () => {
                    unlockAchievement('YouTube Subscriber');
                });
            });
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ Sign in
            window.authModal = new AuthModal();
        });
    </script>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
<div id="authModal" class="auth-modal">
    <div class="modal-content">
        <button class="close-modal" id="closeAuthModal">&times;</button>
        
        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="login">–í—Ö–æ–¥</button>
            <button class="auth-tab" data-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>

        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
        <div id="loginForm" class="auth-form active">
            <h2 class="form-title">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h2>
            
            <div class="auth-message" id="loginMessage"></div>
            
            <div class="form-group">
                <label class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                <input type="text" class="form-input" id="loginUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ª–æ–≥–∏–Ω">
                <div class="form-error" id="loginUsernameError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" class="form-input" id="loginPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø–∞—Ä–æ–ª—å">
                <div class="form-error" id="loginPasswordError"></div>
            </div>
            
            <button class="auth-btn" id="loginBtn">–í–æ–π—Ç–∏</button>
            
            <div class="form-switch">
                –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞?
                <a class="switch-link" data-switch="register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div id="registerForm" class="auth-form">
            <h2 class="form-title">–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h2>
            
            <div class="auth-message" id="registerMessage"></div>
            
            <div class="form-group">
                <label class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                <input type="text" class="form-input" id="registerUsername" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω">
                <div class="form-error" id="registerUsernameError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Email (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                <input type="email" class="form-input" id="registerEmail" placeholder="example@email.com">
                <div class="form-error" id="registerEmailError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ü–∞—Ä–æ–ª—å</label>
                <input type="password" class="form-input" id="registerPassword" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
                <div class="form-error" id="registerPasswordError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</label>
                <input type="password" class="form-input" id="registerConfirmPassword" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                <div class="form-error" id="registerConfirmPasswordError"></div>
            </div>
            
            <button class="auth-btn" id="registerBtn">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
            
            <div class="form-switch">
                –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?
                <a class="switch-link" data-switch="login">–í–æ–π–¥–∏—Ç–µ</a>
            </div>
        </div>
    </div>
</div>

<script>
// –°–∫—Ä–∏–ø—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
class AuthModal {
    constructor() {
        this.modal = document.getElementById('authModal');
        this.tabs = document.querySelectorAll('.auth-tab');
        this.forms = document.querySelectorAll('.auth-form');
        this.closeBtn = document.getElementById('closeAuthModal');
        this.switchLinks = document.querySelectorAll('.switch-link');
        
        this.init();
    }

    init() {
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
        this.tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;
                this.switchTab(tabName);
            });
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ñ–æ—Ä–º
        this.switchLinks.forEach(link => {
            link.addEventListener('click', () => {
                const formName = link.dataset.switch;
                this.switchTab(formName);
            });
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
        this.closeBtn.addEventListener('click', () => {
            this.hide();
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
        this.modal.addEventListener('click', (e) => {
            if (e.target === this.modal) {
                this.hide();
            }
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º
        this.initForms();
    }

    switchTab(tabName) {
        // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
        this.tabs.forEach(tab => {
            tab.classList.toggle('active', tab.dataset.tab === tabName);
        });

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Ñ–æ—Ä–º—É
        this.forms.forEach(form => {
            form.classList.toggle('active', form.id === `${tabName}Form`);
        });

        // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
        this.clearMessages();
    }

    initForms() {
        // –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
        const loginBtn = document.getElementById('loginBtn');
        if (loginBtn) {
            loginBtn.addEventListener('click', () => this.handleLogin());
        }

        // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        const registerBtn = document.getElementById('registerBtn');
        if (registerBtn) {
            registerBtn.addEventListener('click', () => this.handleRegister());
        }
    }

    async handleLogin() {
        const username = document.getElementById('loginUsername').value.trim();
        const password = document.getElementById('loginPassword').value.trim();
        
        // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
        this.clearErrors('login');
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è
        let isValid = true;
        
        if (!username) {
            this.showError('loginUsernameError', '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            isValid = false;
        }
        
        if (!password) {
            this.showError('loginPasswordError', '–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
            isValid = false;
        }
        
        if (!isValid) return;
        
        // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏
        const loginBtn = document.getElementById('loginBtn');
        loginBtn.disabled = true;
        loginBtn.textContent = '–í—Ö–æ–¥...';
        
        try {
            const response = await fetch('/api/login', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, password })
            });
            
            const data = await response.json();
            
            if (data.success) {
                this.showMessage('loginMessage', '–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                setTimeout(() => {
                    this.hide();
                    window.location.reload();
                }, 1500);
            } else {
                this.showMessage('loginMessage', data.error || '–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞', 'error');
            }
        } catch (error) {
            this.showMessage('loginMessage', '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
        } finally {
            loginBtn.disabled = false;
            loginBtn.textContent = '–í–æ–π—Ç–∏';
        }
    }

    async handleRegister() {
        const username = document.getElementById('registerUsername').value.trim();
        const email = document.getElementById('registerEmail').value.trim();
        const password = document.getElementById('registerPassword').value.trim();
        const confirmPassword = document.getElementById('registerConfirmPassword').value.trim();
        
        // –û—á–∏—Å—Ç–∫–∞ –æ—à–∏–±–æ–∫
        this.clearErrors('register');
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è
        let isValid = true;
        
        if (!username) {
            this.showError('registerUsernameError', '–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
            isValid = false;
        } else if (username.length < 3) {
            this.showError('registerUsernameError', '–ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞');
            isValid = false;
        }
        
        if (email && !this.validateEmail(email)) {
    this.showError('registerEmailError', '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç email');
    isValid = false;
}
        
        if (!password) {
            this.showError('registerPasswordError', '–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
            isValid = false;
        } else if (password.length < 6) {
            this.showError('registerPasswordError', '–ú–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤');
            isValid = false;
        }
        
        if (!confirmPassword) {
            this.showError('registerConfirmPasswordError', '–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å');
            isValid = false;
        } else if (password !== confirmPassword) {
            this.showError('registerConfirmPasswordError', '–ü–∞—Ä–æ–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç');
            isValid = false;
        }
        
        if (!isValid) return;
        
        // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏
        const registerBtn = document.getElementById('registerBtn');
        registerBtn.disabled = true;
        registerBtn.textContent = '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è...';
        
        try {
            const response = await fetch('/api/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, email, password })
            });
            
            const data = await response.json();
            
            if (data.success) {
                this.showMessage('registerMessage', '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!', 'success');
                setTimeout(() => {
                    this.hide();
                    window.location.reload();
                }, 1500);
            } else {
                this.showMessage('registerMessage', data.error || '–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏', 'error');
            }
        } catch (error) {
            this.showMessage('registerMessage', '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏', 'error');
        } finally {
            registerBtn.disabled = false;
            registerBtn.textContent = '–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç';
        }
    }

    validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }

    showError(elementId, message) {
        const element = document.getElementById(elementId);
        if (element) {
            element.textContent = message;
            element.classList.add('active');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏ –∫ –∏–Ω–ø—É—Ç—É
            const inputId = elementId.replace('Error', '');
            const input = document.getElementById(inputId);
            if (input) {
                input.classList.add('error');
            }
        }
    }

    clearErrors(formType) {
        const errors = document.querySelectorAll(`.form-error`);
        errors.forEach(error => {
            error.classList.remove('active');
            error.textContent = '';
            
            // –£–±–∏—Ä–∞–µ–º –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏ —É –∏–Ω–ø—É—Ç–æ–≤
            const inputId = error.id.replace('Error', '');
            const input = document.getElementById(inputId);
            if (input) {
                input.classList.remove('error');
            }
        });
    }

    showMessage(elementId, message, type) {
        const element = document.getElementById(elementId);
        if (element) {
            element.textContent = message;
            element.className = `auth-message ${type}`;
        }
    }

    clearMessages() {
        const messages = document.querySelectorAll('.auth-message');
        messages.forEach(msg => {
            msg.className = 'auth-message';
            msg.textContent = '';
        });
    }

    show() {
        this.modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
        this.clearErrors('login');
        this.clearErrors('register');
        this.clearMessages();
        
        // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–Ω–ø—É—Ç—ã
        document.getElementById('loginUsername').value = '';
        document.getElementById('loginPassword').value = '';
        document.getElementById('registerUsername').value = '';
        document.getElementById('registerEmail').value = '';
        document.getElementById('registerPassword').value = '';
        document.getElementById('registerConfirmPassword').value = '';
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–æ—Ä–º—É –≤—Ö–æ–¥–∞
        this.switchTab('login');
    }

    hide() {
        this.modal.classList.remove('active');
        document.body.style.overflow = 'auto';
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', () => {
    window.authModal = new AuthModal();
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    checkAuthStatus();
});

// –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
async function checkAuthStatus() {
    try {
        const response = await fetch('/api/me');
        const data = await response.json();
        
        const authButton = document.getElementById('authButton');
        const profileButton = document.getElementById('profileButton');
        const profileAvatar = document.getElementById('profileAvatar');
        const profileName = document.getElementById('profileName');
        
        if (data.authenticated) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å, —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É Sign in
            if (authButton) authButton.style.display = 'none';
            if (profileButton) profileButton.style.display = 'flex';
            
            // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è
            if (profileAvatar) {
                profileAvatar.textContent = data.user.username.charAt(0).toUpperCase();
            }
            if (profileName) {
                profileName.textContent = data.user.username;
            }
        } else {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É Sign in, —Å–∫—Ä—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å
            if (authButton) authButton.style.display = 'block';
            if (profileButton) profileButton.style.display = 'none';
        }
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
    }
}
</script>
</body>
</html>