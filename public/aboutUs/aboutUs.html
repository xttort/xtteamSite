<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../style.css">
    <title>Games - xtteam</title>
    <link rel="icon" href="../images/icons/icon.svg">
</head>
<body>
    <header class="header">
        <a class = "logo" href="../index.html"><img class = "logo" src="../images/icons/icon.svg" alt="logo"> <h1  href="#!">xtteam</h1></a>
        <ul class="header_list">
            <li><a class="header_purple" href="../index.html">Latest news</a></li>
            <li><a class = "dot">‚Ä¢</a></li>
            <li><a class="header_purple" href="../games/games.html">Games</a></li>
            <li><a class = "dot">‚Ä¢</a></li>
            <li><a class="header_purple" href="#!">!About us!</a></li>
        </ul>
        <div class="auth-container">
            <div id="authButton" class="auth-button">
                <a class="btn" onclick="window.authModal.show(); return false;">Sign in</a>
            </div>
            
            <div id="profileButton" class="profile-info" style="display: none;">
                <a href="/profile" class="profile-link">
                    <div class="profile-avatar" id="profileAvatar"></div>
                    <span class="profile-name" id="profileName"></span>
                </a>
            </div>
        </div>
    </header>
    <div class ="rectbg">
        <div class="container">
            
            <!-- –ó–∞–º–µ–Ω—è–µ–º image-grid –Ω–∞ –±–ª–æ–∫–∏ —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ -->
            <section class="developers-section">
                <h2 class="section-title">XTTTEAM</h2>
                <p class="section-subtitle">Strange guys wich love gamedev</p>
                
                <div class="developers-grid">
                    
                    <!-- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ 1: Ari Gibson -->
                    <div class="developer-card">
                        <div class="developer-avatar">
                            <img src="../images/developers/xttortAva.jpg" alt="Ari Gibson Avatar">
                        </div>
                        <div class="developer-info">
                            <h3 class="developer-name">Shadrin Stephan</h3>
                            <p class="developer-nickname">xttort</p>
                            <p class="developer-bio">
                                Inspired by fandoms and internet caulture started creating games in 2022. Learn C#, Unity, and Blender to bring ideas to life in a scetchs and then in a game. Also insired by Fnaf, Undertale, lowpoly models, bible and old game graphics. BRUH
                            </p>
                            <div class="developer-skills">
                                <span class="skill-tag">Animation</span>
                                <span class="skill-tag">Modeling</span>
                                <span class="skill-tag">Game Design</span>
                                <span class="skill-tag">Code</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ 2: William Pellen -->
                    <div class="developer-card">
                        <div class="developer-avatar">
                            <img src="../images/developers/JustNikitaDisAva.jpg" alt="William Pellen Avatar">
                        </div>
                        <div class="developer-info">
                            <h3 class="developer-name">Samokhvalov Nikita </h3>
                            <p class="developer-nickname">JustNikitaDis's</p>
                            <p class="developer-bio">
                                Learning OOP gradually evolved into an interest in game creation. He started with simple homemade mods, then moved on to exploring simple game engines, and finally ended up with Unity. He's currently actively exploring its capabilities and participating in various GameJams. His favorite pony is Twilight Sparkle.
                            </p>
                            <div class="developer-skills">
                                <span class="skill-tag">Code</span>
                                <span class="skill-tag">Game Design</span>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </section>
            
        </div>
        
        <section class="features">
            <!-- Support Card -->
            <article class="feature-card">
                <img class="card-icon" src="../images/icons/icon-mail.svg" alt="logo">
                <h3 class="left-feature-card-text">xttort's mail</h3>
                <p class="left-feature-card-text">Send letters to xttort with your ideas! Ask him questions and many other things!</p>
                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=mrcet040@gmail.com&su=Your ideas&body=Write something!">
                    <button class="btnSmall">Write letter</button>
                </a>
            </article>

            <!-- Sales Growth Card -->
            <article class="feature-card">
                <img class="card-icon" src="../images/icons/icon-youtube.svg" alt="logo">
                <h3 class="left-feature-card-text">xttort's youtube channel</h3>
                <p class="left-feature-card-text">Dive into developer's and game designer's past and find out something</p>
                <a href="https://www.youtube.com/@xttort">
                    <button class="btnSmall">Show channel</button>
                </a>
            </article>

            <!-- Components-driven Card -->
            <article class="feature-card">
                <img class="card-icon" src="../images/icons/icon-mail.svg" alt="logo">
                <h3 class="left-feature-card-text">JustNikitaDis's mail</h3>
                <p class="left-feature-card-text">Send letters to JustNikitaDis with your ideas! Ask him questions and many other things!</p>
                <a href="https://mail.google.com/mail/?view=cm&fs=1&to=nikita1911200418@gmail.com&su=Your ideas&body=Write something!">
                    <button class="btnSmall">Write letter</button>
                </a>
            </article>

            <!-- Swap the Icon Card -->
            <article class="feature-card">
                <img class="card-icon" src="../images/icons/icon-youtube.svg" alt="logo">
                <h3 class="left-feature-card-text">JustNikitaDis's youtube channel</h3>
                <p class="left-feature-card-text">Dive into developer's and game designer's past and find out something</p>
                <a href="https://www.youtube.com/@justnikitaplays1472">
                    <button class="btnSmall">Show channel</button>
                </a>
            </article>
        </section>
    </div>
    
    <footer>
        <h1 class="footerWave">¬© 2025 xtteam. All rights reserved.</h1>
    </footer>
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
        async function checkAuth() {
            try {
                const response = await fetch('/api/achievements');
                const data = await response.json();
                
                if (data.user) {
                    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                    document.getElementById('authButton').style.display = 'none';
                    document.getElementById('profileButton').style.display = 'flex';
                    
                    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞–≤–∞—Ç–∞—Ä –∏ –∏–º—è
                    const avatar = document.getElementById('profileAvatar');
                    const name = document.getElementById('profileName');
                    
                    const firstLetter = data.user.username.charAt(0).toUpperCase();
                    avatar.textContent = firstLetter;
                    name.textContent = data.user.username;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
            }
        }
    
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        async function unlockAchievement(achievementName) {
            try {
                const response = await fetch('/api/unlock-achievement', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ achievementName })
                });
                
                const data = await response.json();
                if (data.success) {
                    console.log(`üèÜ ${data.message}`);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:', error);
            }
        }
    
        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        document.addEventListener('DOMContentLoaded', () => {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
            checkAuth();
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Team Introduction" - –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–û –Ω–∞—Å"
            unlockAchievement('Team Introduction');
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "Letter to Developer" - –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –ø–∏—Å—å–º–∞
            document.querySelectorAll('a[href*="mail.google.com"]').forEach(link => {
                link.addEventListener('click', () => {
                    unlockAchievement('Letter to Developer');
                });
            });
            
            // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "YouTube Subscriber" - –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É YouTube
            document.querySelectorAll('a[href*="youtube.com"]').forEach(link => {
                link.addEventListener('click', () => {
                    unlockAchievement('YouTube Subscriber');
                });
            });
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–∫–∏ Sign in
            window.authModal = new AuthModal();
        });
    </script>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
<div id="authModal" class="auth-modal">
    <div class="modal-content">
        <button class="close-modal" id="closeAuthModal">&times;</button>
        
        <div class="auth-tabs">
            <button class="auth-tab active" data-tab="login">Login</button>
            <button class="auth-tab" data-tab="register">Register</button>
        </div>

        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ -->
        <div id="loginForm" class="auth-form active">
            <h2 class="form-title">Login</h2>
            
            <div class="auth-message" id="loginMessage"></div>
            
            <div class="form-group">
                <label class="form-label">user name</label>
                <input type="text" class="form-input" id="loginUsername" placeholder="Write your login">
                <div class="form-error" id="loginUsernameError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" id="loginPassword" placeholder="Write your password">
                <div class="form-error" id="loginPasswordError"></div>
            </div>
            
            <button class="auth-btn" id="loginBtn">Login</button>
            
            <div class="form-switch">
                Don't have an account?
                <a class="switch-link" data-switch="register">Register</a>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
        <div id="registerForm" class="auth-form">
            <h2 class="form-title">Create account</h2>
            
            <div class="auth-message" id="registerMessage"></div>
            
            <div class="form-group">
                <label class="form-label">User name</label>
                <input type="text" class="form-input" id="registerUsername" placeholder="Create a password">
                <div class="form-error" id="registerUsernameError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Email (optional)</label>
                <input type="email" class="form-input" id="registerEmail" placeholder="example@email.com">
                <div class="form-error" id="registerEmailError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" class="form-input" id="registerPassword" placeholder="Create a password">
                <div class="form-error" id="registerPasswordError"></div>
            </div>
            
            <div class="form-group">
                <label class="form-label">Password confirmation</label>
                <input type="password" class="form-input" id="registerConfirmPassword" placeholder="Repeat a password">
                <div class="form-error" id="registerConfirmPasswordError"></div>
            </div>
            
            <button class="auth-btn" id="registerBtn">Create account</button>
            
            <div class="form-switch">
                Already have an account?
                <a class="switch-link" data-switch="login">Login</a>
            </div>
        </div>
    </div>
</div>

<script>
    // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–≥—Ä
    async function checkAuth() {
        console.log('üîç [Games] Checking authentication status...');
        
        try {
            const response = await fetch('/api/me', {
                method: 'GET',
                credentials: 'include',
                headers: {
                    'Accept': 'application/json'
                }
            });
            
            if (!response.ok) {
                throw new Error(`HTTP ${response.status}`);
            }
            
            const data = await response.json();
            console.log('[Games] Auth check response:', data);
            
            const authButton = document.getElementById('authButton');
            const profileButton = document.getElementById('profileButton');
            const profileAvatar = document.getElementById('profileAvatar');
            const profileName = document.getElementById('profileName');
            
            if (data.authenticated && data.user) {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                if (authButton) authButton.style.display = 'none';
                if (profileButton) {
                    profileButton.style.display = 'flex';
                    profileButton.style.alignItems = 'center';
                }
                
                if (profileAvatar) {
                    const firstLetter = data.user.username.charAt(0).toUpperCase();
                    profileAvatar.textContent = firstLetter;
                    profileAvatar.style.display = 'flex';
                    profileAvatar.style.alignItems = 'center';
                    profileAvatar.style.justifyContent = 'center';
                }
                
                if (profileName) {
                    profileName.textContent = data.user.username;
                }
                
                console.log('[Games] ‚úÖ Authenticated as:', data.user.username);
                return true;
            } else {
                // –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
                if (authButton) {
                    authButton.style.display = 'block';
                    authButton.style.opacity = '1';
                }
                if (profileButton) profileButton.style.display = 'none';
                
                console.log('[Games] ‚ùå Not authenticated');
                return false;
            }
        } catch (error) {
            console.error('[Games] ‚ùå Auth check failed:', error);
            
            // Fallback
            const authButton = document.getElementById('authButton');
            const profileButton = document.getElementById('profileButton');
            
            if (authButton) authButton.style.display = 'block';
            if (profileButton) profileButton.style.display = 'none';
            
            return false;
        }
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ –∏–≥—Ä–∞—Ö
    async function unlockAchievement(achievementName) {
        try {
            const response = await fetch('/api/unlock-achievement', {
                method: 'POST',
                credentials: 'include',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: JSON.stringify({ achievementName })
            });
            
            const data = await response.json();
            if (data.success) {
                console.log(`üèÜ [Games] Achievement unlocked: ${achievementName}`);
            }
            return data;
        } catch (error) {
            console.error('[Games] Achievement unlock error:', error);
            return { success: false, error: error.message };
        }
    }
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π AuthModal –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–≥—Ä
    class AuthModal {
        constructor() {
            this.modal = document.getElementById('authModal');
            this.tabs = document.querySelectorAll('.auth-tab');
            this.forms = document.querySelectorAll('.auth-form');
            this.closeBtn = document.getElementById('closeAuthModal');
            this.switchLinks = document.querySelectorAll('.switch-link');
            
            this.init();
        }
    
        init() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤–∫–ª–∞–¥–æ–∫
            this.tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabName = tab.dataset.tab;
                    this.switchTab(tabName);
                });
            });
    
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ñ–æ—Ä–º
            this.switchLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const formName = link.dataset.switch;
                    this.switchTab(formName);
                });
            });
    
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            this.closeBtn.addEventListener('click', () => {
                this.hide();
            });
    
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω
            this.modal.addEventListener('click', (e) => {
                if (e.target === this.modal) {
                    this.hide();
                }
            });
    
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–æ—Ä–º
            this.initForms();
        }
    
        switchTab(tabName) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            this.tabs.forEach(tab => {
                tab.classList.toggle('active', tab.dataset.tab === tabName);
            });
    
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é —Ñ–æ—Ä–º—É
            this.forms.forEach(form => {
                form.classList.toggle('active', form.id === `${tabName}Form`);
            });
    
            // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            this.clearMessages();
            this.clearErrors();
        }
    
        initForms() {
            // –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.addEventListener('click', () => this.handleLogin());
            }
    
            // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            const registerBtn = document.getElementById('registerBtn');
            if (registerBtn) {
                registerBtn.addEventListener('click', () => this.handleRegister());
            }
    
            // Enter key submission
            ['loginUsername', 'loginPassword', 'registerUsername', 'registerPassword', 'registerConfirmPassword'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            if (id.startsWith('login')) {
                                this.handleLogin();
                            } else if (id.startsWith('register')) {
                                this.handleRegister();
                            }
                        }
                    });
                }
            });
        }
    
        async handleLogin() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();
            
            this.clearErrors();
            this.clearMessages();
            
            let isValid = true;
            
            if (!username) {
                this.showError('loginUsernameError', 'Username is required');
                isValid = false;
            }
            
            if (!password) {
                this.showError('loginPasswordError', 'Password is required');
                isValid = false;
            }
            
            if (!isValid) return;
            
            const loginBtn = document.getElementById('loginBtn');
            const originalText = loginBtn.textContent;
            loginBtn.disabled = true;
            loginBtn.textContent = 'Logging in...';
            
            try {
                const response = await fetch('/api/login', {
                    method: 'POST',
                    credentials: 'include',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    this.showMessage('loginMessage', 'Login successful!', 'success');
                    
                    setTimeout(async () => {
                        this.hide();
                        await checkAuth();
                        
                        // Unlock achievements
                        await unlockAchievement('Game Observer');
                        
                        setTimeout(() => {
                            window.location.reload();
                        }, 500);
                        
                    }, 1000);
                } else {
                    this.showMessage('loginMessage', data.error || 'Login failed', 'error');
                }
            } catch (error) {
                console.error('Network error:', error);
                this.showMessage('loginMessage', 'Network error. Please try again.', 'error');
            } finally {
                loginBtn.disabled = false;
                loginBtn.textContent = originalText;
            }
        }
    
        async handleRegister() {
            const username = document.getElementById('registerUsername').value.trim();
            const email = document.getElementById('registerEmail').value.trim();
            const password = document.getElementById('registerPassword').value.trim();
            const confirmPassword = document.getElementById('registerConfirmPassword').value.trim();
            
            this.clearErrors();
            this.clearMessages();
            
            let isValid = true;
            
            if (!username) {
                this.showError('registerUsernameError', 'Username is required');
                isValid = false;
            } else if (username.length < 3) {
                this.showError('registerUsernameError', 'Username must be at least 3 characters');
                isValid = false;
            }
            
            if (email && !this.validateEmail(email)) {
                this.showError('registerEmailError', 'Invalid email format');
                isValid = false;
            }
            
            if (!password) {
                this.showError('registerPasswordError', 'Password is required');
                isValid = false;
            } else if (password.length < 6) {
                this.showError('registerPasswordError', 'Password must be at least 6 characters');
                isValid = false;
            }
            
            if (!confirmPassword) {
                this.showError('registerConfirmPasswordError', 'Please confirm your password');
                isValid = false;
            } else if (password !== confirmPassword) {
                this.showError('registerConfirmPasswordError', 'Passwords do not match');
                isValid = false;
            }
            
            if (!isValid) return;
            
            const registerBtn = document.getElementById('registerBtn');
            const originalText = registerBtn.textContent;
            registerBtn.disabled = true;
            registerBtn.textContent = 'Creating account...';
            
            try {
                const response = await fetch('/api/register', {
                    method: 'POST',
                    credentials: 'include',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify({ 
                        username, 
                        password, 
                        email: email || null 
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    this.showMessage('registerMessage', 'Account created successfully!', 'success');
                    
                    setTimeout(async () => {
                        await checkAuth();
                        this.hide();
                        
                        setTimeout(() => {
                            window.location.reload();
                        }, 500);
                        
                    }, 1000);
                } else {
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—à–∏–±–∫—É
                    this.showMessage('registerMessage', data.error || 'Registration failed', 'error');
                    
                    if (data.error && data.error.toLowerCase().includes('username')) {
                        this.showError('registerUsernameError', data.error);
                    }
                    
                    if (data.error && data.error.toLowerCase().includes('email')) {
                        this.showError('registerEmailError', data.error);
                    }
                }
            } catch (error) {
                console.error('Registration error:', error);
                this.showMessage('registerMessage', 'Network error. Please try again.', 'error');
            } finally {
                registerBtn.disabled = false;
                registerBtn.textContent = originalText;
            }
        }
    
        validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
    
        showError(elementId, message) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.style.display = 'block';
                element.style.color = '#ff4757';
                
                const inputId = elementId.replace('Error', '');
                const input = document.getElementById(inputId);
                if (input) {
                    input.style.borderColor = '#ff4757';
                    input.style.boxShadow = '0 0 0 1px #ff4757';
                }
            }
        }
    
        clearErrors() {
            const errors = document.querySelectorAll('.form-error');
            errors.forEach(error => {
                error.textContent = '';
                error.style.display = 'none';
                
                const inputId = error.id.replace('Error', '');
                const input = document.getElementById(inputId);
                if (input) {
                    input.style.borderColor = '';
                    input.style.boxShadow = '';
                }
            });
        }
    
        showMessage(elementId, message, type) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = message;
                element.className = `auth-message ${type}`;
                element.style.display = 'block';
                element.style.opacity = '1';
            }
        }
    
        clearMessages() {
            const messages = document.querySelectorAll('.auth-message');
            messages.forEach(msg => {
                msg.className = 'auth-message';
                msg.textContent = '';
                msg.style.display = 'none';
            });
        }
    
        show() {
            this.modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            this.clearErrors();
            this.clearMessages();
            
            const inputs = [
                'loginUsername', 'loginPassword',
                'registerUsername', 'registerEmail', 'registerPassword', 'registerConfirmPassword'
            ];
            
            inputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) input.value = '';
            });
            
            this.switchTab('login');
            
            setTimeout(() => {
                const firstInput = document.getElementById('loginUsername');
                if (firstInput) firstInput.focus();
            }, 100);
        }
    
        hide() {
            this.modal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    document.addEventListener('DOMContentLoaded', async () => {
        console.log('üéÆ Games page loaded');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        window.authModal = new AuthModal();
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
        await checkAuth();
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞—Ö–æ–¥–µ –≤ –∏–≥—Ä—ã
        await unlockAchievement('Game Observer');
        
        // –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "GamEr" –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –∏–≥—Ä
        document.querySelectorAll('.modal-btn-download').forEach(button => {
            button.addEventListener('click', async () => {
                const gameTitle = document.getElementById('modalGameTitle').textContent;
                console.log(`üéÆ Downloading: ${gameTitle}`);
                await unlockAchievement('GamEr');
            });
        });
    });
    
    // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    window.showAuthModal = function() {
        if (window.authModal) {
            window.authModal.show();
        }
        return false;
    };
    
    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
    setInterval(async () => {
        await checkAuth();
    }, 30000);
    </script>
</body>
</html>